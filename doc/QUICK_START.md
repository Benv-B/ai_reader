# 快速开始指南

## 🚀 5 分钟上手

### 第一步：安装依赖

```bash
npm install
```

### 第二步：配置 API Key

1. 复制 `env.example.txt` 为 `.env`
2. 编辑 `.env`，填写你的 Gemini API Key：

```bash
GEMINI_API_KEY=your_api_key_here
GEMINI_MODEL=gemini-2.0-flash-exp
```

> 💡 获取 API Key：访问 [Google AI Studio](https://aistudio.google.com/app/apikey)

### 第三步：启动应用

#### 开发模式（推荐）

```bash
# 启动双进程开发（Vite + Electron）
npm run dev
```

这会自动：
1. 启动 Vite 开发服务器（端口 5173）
2. 等待服务器就绪后启动 Electron
3. 自动打开 DevTools

#### 生产模式

```bash
# 先构建
npm run vite:build

# 再启动
npm start
```

### 第四步：打开 PDF

1. 点击顶部 "Open PDF" 按钮
2. 选择你的 PDF 文件
3. 等待加载完成

**提示**: 状态栏会显示加载进度和页数

### 第五步：开始阅读

- **左侧**：PDF 原文
- **右侧**：AI 翻译（自动加载）

**首屏可见的页面会自动翻译！**

---

## ✨ 核心特性

### 1. 页级翻译
- 自动检测当前可见页
- 只翻译当前页，节省 API 资源
- 已缓存的页面秒出

### 2. 智能缓存
- 页级缓存，细粒度高效
- 两级缓存（内存 + 文件）
- 缓存命中秒出，无需等待

### 3. 视窗监测
- 使用 IntersectionObserver 实时监测
- 自动调度翻译任务
- 性能优异，不卡顿

### 4. 双向同步滚动
- 左右两侧精确同步
- 支持双向拖动
- 高度自适应匹配

---

## 🎯 使用技巧

### 快速浏览模式
1. 快速滚动到感兴趣的章节
2. 停留 2-3 秒让页面完成翻译
3. 继续滚动

### 精读模式
1. 滚动到目标章节
2. 等待所有页面翻译完成
3. 仔细阅读

### 批量预翻译
1. 从第一页开始
2. 缓慢滚动到最后一页
3. 每页停留 1-2 秒
4. 所有内容会被缓存

---

## ⚙️ 常用设置

点击顶部 "⚙️ Settings" 打开设置面板：

- **字体大小**: 调整译文字号 (14-24px)
- **行高**: 调整行间距 (1.4-2.4)
- **字体**: 选择喜欢的中文字体
- **翻译并发数**: 调整同时翻译的页数 (1-5)

**推荐配置**:
- 字体大小: 18px
- 行高: 1.9
- 字体: 宋体
- 并发数: 2

---

## 📊 缓存管理

### 查看缓存
点击 "Cache Stats" 查看：
- 已缓存页数量
- 占用磁盘空间
- 总页数统计

### 清空缓存
点击 "Clear Cache" 清空所有翻译缓存。

**警告**: 清空后需重新翻译！

---

## 🧪 测试

### 运行单元测试

```bash
npm run test:unit
```

### 测试 API 连接

```bash
npm run test:api
```

---

## 🐛 故障排查

### 翻译失败？
- 确保 API Key 已配置
- 检查网络连接
- 查看控制台错误信息

### 滚动不同步？
- 刷新页面（Ctrl+R）
- 重新加载 PDF

### 缓存未生效？
- 确认文档未被修改
- 查看控制台缓存错误
- 尝试清空缓存重新翻译

---

## 📚 下一步

1. ✅ 打开你的第一个 PDF
2. ✅ 体验页级翻译的流畅感
3. ✅ 调整设置找到最佳配置
4. ✅ 阅读 [开发指南](DEVELOPMENT.md) 了解更多

**祝你阅读愉快！** 📖✨
