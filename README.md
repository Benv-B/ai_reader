# ğŸ“š AI PDF Reader Pro

> ä¸“ä¸šçº§åŒè¯­å¯¹ç…§ PDF é˜…è¯»å™¨ï¼ŒåŸºäº Electron + React + TypeScript + Gemini AIï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œå…·å¤‡ä¼ä¸šçº§ç¼“å­˜å’Œå®‰å…¨æœºåˆ¶ã€‚

![Version](https://img.shields.io/badge/version-2.0-blue)
![Electron](https://img.shields.io/badge/electron-39.2.3-47848f)
![React](https://img.shields.io/badge/react-18.2.0-61dafb)
![TypeScript](https://img.shields.io/badge/typescript-5.3.0-3178c6)
![License](https://img.shields.io/badge/license-MIT-green)

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ æ™ºèƒ½ç¿»è¯‘ç³»ç»Ÿ
- **æ–‡æ¡£å“ˆå¸Œè¯†åˆ«**ï¼šåŸºäº SHA-256 å†…å®¹å“ˆå¸Œï¼ŒåŒä¸€æ–‡æ¡£æ°¸ä¹…ç¼“å­˜
- **é˜Ÿåˆ—ç®¡ç†**ï¼šæ™ºèƒ½ç¿»è¯‘é˜Ÿåˆ—ï¼Œæœ€å¤§å¹¶å‘æ§åˆ¶ï¼Œé¿å… API é™æµ
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šè·¨é¡µå¥å­å¤„ç†ï¼Œç¡®ä¿ç¿»è¯‘è¿è´¯æ— æ–­å±‚
- **é¢„å–æœºåˆ¶**ï¼šè‡ªåŠ¨ç¿»è¯‘ä¸‹ä¸€é¡µï¼Œæå‡é˜…è¯»æµç•…åº¦

### ğŸ”’ ä¼ä¸šçº§å®‰å…¨
- **API Key ä¿æŠ¤**ï¼šAPI Key å­˜å‚¨åœ¨ä¸»è¿›ç¨‹ï¼Œå‰ç«¯æ— æ³•è®¿é—®
- **ç¯å¢ƒå˜é‡ç®¡ç†**ï¼šæ”¯æŒ `.env` é…ç½®ï¼Œé¿å…ç¡¬ç¼–ç 
- **ä¸Šä¸‹æ–‡éš”ç¦»**ï¼šå¯ç”¨ Electron å®‰å…¨æœ€ä½³å®è·µ
- **IPC ç™½åå•**ï¼šä¸¥æ ¼é™åˆ¶æ¸²æŸ“è¿›ç¨‹ä¸ä¸»è¿›ç¨‹é€šä¿¡

### ğŸ“– æè‡´é˜…è¯»ä½“éªŒ
- **é¡µå¯¹é¡µç²¾å‡†åŒæ­¥**ï¼šæœºæ¢°çº§æ»šåŠ¨å¯¹é½ï¼Œé›¶è¯¯å·®
- **ä¹¦ç±çº§æ’ç‰ˆ**ï¼šå®‹ä½“/æ¥·ä½“ï¼Œ1.9 å€è¡Œé«˜ï¼Œæ¨¡æ‹Ÿçº¸è´¨ä¹¦
- **åŠ¨æ€å­—å·é€‚é…**ï¼šå†…å®¹è‡ªåŠ¨é€‚é…é¡µé¢é«˜åº¦
- **æ ‡é¢˜æ™ºèƒ½è¯†åˆ«**ï¼šFew-Shot Learning è¿˜åŸç« èŠ‚ç»“æ„

### âš¡ é«˜æ€§èƒ½æ¶æ„
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šPDF æœåŠ¡ã€ç¿»è¯‘æœåŠ¡ã€ç¼“å­˜æœåŠ¡ç‹¬ç«‹è§£è€¦
- **åŒå±‚ç¼“å­˜**ï¼šå†…å­˜ç¼“å­˜ + æ–‡ä»¶ç³»ç»ŸæŒä¹…åŒ–
- **å¼‚æ­¥ä¼˜å…ˆ**ï¼šæ‰€æœ‰ I/O æ“ä½œå¼‚æ­¥å¤„ç†ï¼ŒUI æ°¸ä¸é˜»å¡
- **èµ„æºç®¡ç†**ï¼šè‡ªåŠ¨é‡Šæ”¾ PDF æ–‡æ¡£èµ„æºï¼Œé˜²æ­¢å†…å­˜æ³„æ¼

### ğŸš€ ç°ä»£åŒ–æŠ€æœ¯æ ˆ
- **React 18**ï¼šç»„ä»¶åŒ– UIï¼Œæ•°æ®é©±åŠ¨
- **TypeScript 5**ï¼šç±»å‹å®‰å…¨ï¼Œç¼–è¯‘æ—¶æ£€æŸ¥
- **Vite 5**ï¼šæé€Ÿæ„å»ºï¼Œçƒ­æ¨¡å—æ›¿æ¢
- **Vitest**ï¼šå•å…ƒæµ‹è¯•ï¼Œä¿éšœä»£ç è´¨é‡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 18.0.0
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone <your-repo-url>
cd reader

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½® API Key
# å¤åˆ¶ env.example.txt ä¸º .env
# ç¼–è¾‘ .envï¼Œå¡«å†™ä½ çš„ Gemini API Key

# 4. å¯åŠ¨åº”ç”¨ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
npm run dev

# æˆ–å¯åŠ¨ç”Ÿäº§æ¨¡å¼
npm start
```

### é…ç½®è¯´æ˜

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# Gemini API é…ç½®
GEMINI_API_KEY=ä½ çš„_API_KEY
GEMINI_MODEL=gemini-2.0-flash-exp

# å¼€å‘æ¨¡å¼ï¼ˆå¯é€‰ï¼‰
NODE_ENV=development
```

> ğŸ’¡ è·å– API Keyï¼šè®¿é—® [Google AI Studio](https://aistudio.google.com/app/apikey)

**è¯¦ç»†æ­¥éª¤**ï¼šæŸ¥çœ‹ [doc/QUICK_START.md](doc/QUICK_START.md)

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
reader/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ main/              # Electron ä¸»è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ main.js        # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ ipc-handlers.js # IPC é€šä¿¡å¤„ç†
â”‚   â”œâ”€â”€ preload/           # é¢„åŠ è½½è„šæœ¬
â”‚   â”‚   â””â”€â”€ preload.js
â”‚   â””â”€â”€ renderer/          # æ¸²æŸ“è¿›ç¨‹ï¼ˆReact + TypeScriptï¼‰
â”‚       â”œâ”€â”€ components/     # React ç»„ä»¶
â”‚       â”œâ”€â”€ context/        # React Context
â”‚       â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘å±‚
â”‚       â”œâ”€â”€ types/          # TypeScript ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ App.tsx         # æ ¹ç»„ä»¶
â”‚       â””â”€â”€ main.tsx        # React å…¥å£
â”œâ”€â”€ doc/                    # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ QUICK_START.md     # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”‚   â”œâ”€â”€ DEVELOPMENT.md     # å¼€å‘æŒ‡å—
â”‚   â”œâ”€â”€ BUILD_AND_DISTRIBUTE.md # æ‰“åŒ…åˆ†å‘æŒ‡å—
â”‚   â””â”€â”€ TRANSLATION_OPTIMIZATION.md # ç¿»è¯‘ä¼˜åŒ–è¯´æ˜
â”œâ”€â”€ test/                   # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ *.test.ts          # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ test-api.js        # API æµ‹è¯•
â”œâ”€â”€ cache/                  # ç¼“å­˜ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ index.html             # HTML å…¥å£
â”œâ”€â”€ vite.config.ts         # Vite é…ç½®
â”œâ”€â”€ tsconfig.json           # TypeScript é…ç½®
â””â”€â”€ package.json
```

---

## ğŸ¨ æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. PDF æœåŠ¡ (`src/renderer/services/pdf-service.ts`)

è´Ÿè´£ PDF æ–‡æ¡£çš„åŠ è½½ã€æ¸²æŸ“å’Œæ–‡æœ¬æå–ï¼š

```typescript
import PDFService from './services/pdf-service';

const pdfService = new PDFService();

// åŠ è½½æ–‡æ¡£ï¼Œè¿”å›é¡µæ•°å’Œæ–‡æ¡£å“ˆå¸Œ
const { numPages, docHash } = await pdfService.loadDocument(file);

// æ¸²æŸ“é¡µé¢åˆ° Canvas
await pdfService.renderPage(pageNum, canvas, scale);

// æå–é¡µé¢æ–‡æœ¬
const text = await pdfService.extractPageText(pageNum);
```

### 2. ç¿»è¯‘æœåŠ¡ (`src/renderer/services/translation-service.ts`)

æ™ºèƒ½ç¿»è¯‘é˜Ÿåˆ—ç®¡ç†ï¼š

```typescript
import TranslationService from './services/translation-service';

const translationService = new TranslationService();

// æ·»åŠ ç¿»è¯‘ä»»åŠ¡ï¼ˆè‡ªåŠ¨æ’é˜Ÿï¼‰
const result = await translationService.translate({
    text: 'åŸæ–‡',
    prevContext: 'ä¸Šä¸€é¡µä¸Šä¸‹æ–‡',
    nextContext: 'ä¸‹ä¸€é¡µä¸Šä¸‹æ–‡'
});
```

### 3. ç¼“å­˜æœåŠ¡ (`src/renderer/services/cache-service.ts`)

åŒå±‚ç¼“å­˜æ¶æ„ï¼š

```typescript
import CacheService from './services/cache-service';

const cacheService = new CacheService();

// è¯»å–ç¼“å­˜
const cached = await cacheService.get(key);

// å†™å…¥ç¼“å­˜
await cacheService.set(key, value);

// ç¼“å­˜ç»Ÿè®¡
const stats = await cacheService.getStats();
```

---

## ğŸ“ ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æ“ä½œ

1. **æ‰“å¼€ PDF**ï¼šç‚¹å‡» "Open PDF" é€‰æ‹©æ–‡ä»¶
2. **å¼€å§‹é˜…è¯»**ï¼šæ»šåŠ¨å·¦ä¾§ PDFï¼Œå³ä¾§è‡ªåŠ¨ç¿»è¯‘
3. **æŸ¥çœ‹ç¼“å­˜**ï¼šç‚¹å‡» "Cache Stats" æŸ¥çœ‹ç»Ÿè®¡
4. **æ¸…ç©ºç¼“å­˜**ï¼šç‚¹å‡» "Clear Cache" é‡ç½®æ‰€æœ‰ç¼“å­˜

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨åŒè¿›ç¨‹å¼€å‘ï¼ˆVite + Electronï¼‰
npm run dev

# ä»…å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨
npm run vite:dev

# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test:unit
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºæ¸²æŸ“è¿›ç¨‹
npm run vite:build

# å¯åŠ¨ç”Ÿäº§æ¨¡å¼
npm start
```

### æ‰“åŒ…åˆ†å‘

```bash
# 1. æ„å»ºå‰ç«¯
npm run vite:build

# 2. æ‰“åŒ…åº”ç”¨
npm run build        # å½“å‰å¹³å°
npm run build:win    # Windows
npm run build:mac    # macOS
npm run build:linux  # Linux
```

æ‰“åŒ…å®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶åœ¨ `release/` ç›®å½•ã€‚

**ç”¨æˆ·é…ç½® API Key**ï¼ˆæ‰“åŒ…åçš„åº”ç”¨ï¼‰ï¼š
- Windows: `C:\Users\ç”¨æˆ·å\AppData\Roaming\ai-pdf-reader\.env`
- macOS: `~/Library/Application Support/ai-pdf-reader/.env`
- Linux: `~/.config/ai-pdf-reader/.env`

åœ¨é…ç½®ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼Œå†…å®¹ï¼š
```
GEMINI_API_KEY=ä½ çš„_API_KEY
GEMINI_MODEL=gemini-2.0-flash-exp
```

è¯¦ç»†è¯´æ˜ï¼šæŸ¥çœ‹ [doc/BUILD_AND_DISTRIBUTE.md](doc/BUILD_AND_DISTRIBUTE.md)

---

## ğŸ§ª æµ‹è¯•

### å•å…ƒæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:unit

# ç›‘å¬æ¨¡å¼
npm run test:unit:watch
```

### API è¿æ¥æµ‹è¯•

```bash
npm run test:api
```

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šç¿»è¯‘å¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- API Key æœªé…ç½®æˆ–æ— æ•ˆ
- ç½‘ç»œè¿æ¥é—®é¢˜
- API é…é¢ç”¨å°½

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”é…ç½®æ­£ç¡®
2. è¿è¡Œ `npm run test:api` æµ‹è¯• API è¿æ¥
3. æ‰“å¼€ DevTools æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯

### é—®é¢˜ 2ï¼šæ»šåŠ¨ä¸åŒæ­¥

**å¯èƒ½åŸå› **ï¼š
- é¡µé¢é«˜åº¦æœªæ­£ç¡®åŒæ­¥
- çª—å£å°ºå¯¸æ”¹å˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åˆ·æ–°é¡µé¢ï¼ˆCtrl+Rï¼‰
2. é‡æ–°åŠ è½½ PDF

### é—®é¢˜ 3ï¼šç¼“å­˜æœªç”Ÿæ•ˆ

**å¯èƒ½åŸå› **ï¼š
- ç¼“å­˜ç›®å½•æƒé™é—®é¢˜
- IPC é€šä¿¡å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ `cache/` ç›®å½•å­˜åœ¨
2. æ£€æŸ¥ä¸»è¿›ç¨‹æ˜¯å¦æ­£å¸¸å¯åŠ¨
3. ä½¿ç”¨ "Clear Cache" åé‡è¯•

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- **[å¿«é€Ÿå¼€å§‹](doc/QUICK_START.md)** - 5 åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
- **[å¼€å‘æŒ‡å—](doc/DEVELOPMENT.md)** - å¼€å‘ç¯å¢ƒæ­å»ºã€æµ‹è¯•ã€éƒ¨ç½²
- **[æ‰“åŒ…åˆ†å‘](doc/BUILD_AND_DISTRIBUTE.md)** - æ‰“åŒ…å’Œåˆ†å‘æŒ‡å—
- **[ç¿»è¯‘ä¼˜åŒ–](doc/TRANSLATION_OPTIMIZATION.md)** - ç¿»è¯‘ç³»ç»Ÿä¼˜åŒ–è¯´æ˜

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” | ç‰ˆæœ¬ |
|------|------|------|
| **Electron** | è·¨å¹³å°æ¡Œé¢æ¡†æ¶ | ^39.2.3 |
| **React** | UI æ¡†æ¶ | ^18.2.0 |
| **TypeScript** | ç±»å‹ç³»ç»Ÿ | ^5.3.0 |
| **Vite** | æ„å»ºå·¥å…· | ^5.0.0 |
| **PDF.js** | PDF æ¸²æŸ“å¼•æ“ | ^5.4.394 |
| **Gemini AI** | æ™ºèƒ½ç¿»è¯‘ API | 2.0-flash-exp |
| **Vitest** | æµ‹è¯•æ¡†æ¶ | ^1.6.1 |

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### æœ¬åœ°å¼€å‘

```bash
# å¼€å‘æ¨¡å¼ï¼ˆå¸¦ DevToolsï¼‰
npm run dev

# æµ‹è¯• API
npm run test:api

# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test:unit
```

---

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºã€‚

---

## ğŸ™ è‡´è°¢

- [PDF.js](https://mozilla.github.io/pdf.js/) - Mozilla çš„å¼ºå¤§ PDF å¼•æ“
- [Google Gemini](https://deepmind.google/technologies/gemini/) - é«˜è´¨é‡ç¿»è¯‘ API
- [Electron](https://www.electronjs.org/) - è·¨å¹³å°æ¡Œé¢æ¡†æ¶
- [React](https://react.dev/) - UI æ¡†æ¶
- [Vite](https://vitejs.dev/) - æé€Ÿæ„å»ºå·¥å…·

---

<p align="center">
  <b>è®©è‹±æ–‡æŠ€æœ¯ä¹¦ç±é˜…è¯»å¦‚æ¯è¯­èˆ¬æµç•…</b><br>
  Made with â¤ï¸ and â˜•
</p>
